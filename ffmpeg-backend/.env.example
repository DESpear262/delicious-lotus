# ==============================================================================
# FFmpeg Backend - Environment Variables
# ==============================================================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to version control

# ------------------------------------------------------------------------------
# Application Settings
# ------------------------------------------------------------------------------
APP_NAME="FFmpeg Backend"
APP_VERSION="0.1.0"
ENVIRONMENT=development  # development, staging, production
DEBUG=true
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL

# ------------------------------------------------------------------------------
# API Settings
# ------------------------------------------------------------------------------
API_V1_PREFIX=/api/v1
API_PORT=8000

# CORS - Comma-separated list of allowed origins
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8000

# ------------------------------------------------------------------------------
# Database Settings (PostgreSQL)
# ------------------------------------------------------------------------------
POSTGRES_DB=ffmpeg_backend
POSTGRES_USER=ffmpeg
POSTGRES_PASSWORD=ffmpeg_password_change_in_production
DATABASE_URL=postgresql://ffmpeg:ffmpeg_password_change_in_production@db:5432/ffmpeg_backend

# Database connection pool settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20

# ------------------------------------------------------------------------------
# Redis Settings
# ------------------------------------------------------------------------------
REDIS_URL=redis://redis:6379/0
REDIS_MAX_CONNECTIONS=50

# ------------------------------------------------------------------------------
# RQ (Job Queue) Settings
# ------------------------------------------------------------------------------
RQ_DEFAULT_TIMEOUT=3600  # Default job timeout in seconds (1 hour)
RQ_RESULT_TTL=86400  # Job result TTL in seconds (24 hours)
RQ_FAILURE_TTL=604800  # Failed job TTL in seconds (7 days)

# ------------------------------------------------------------------------------
# S3 / Object Storage Settings
# ------------------------------------------------------------------------------
S3_BUCKET_NAME=ffmpeg-media-bucket
S3_REGION=us-east-1
S3_ACCESS_KEY_ID=your_aws_access_key_id
S3_SECRET_ACCESS_KEY=your_aws_secret_access_key
# S3_ENDPOINT_URL=http://minio:9000  # For local MinIO or other S3-compatible storage

# ------------------------------------------------------------------------------
# FFmpeg Settings
# ------------------------------------------------------------------------------
FFMPEG_PATH=/usr/local/bin/ffmpeg
FFPROBE_PATH=/usr/local/bin/ffprobe
FFMPEG_THREADS=0  # 0 = auto-detect optimal thread count
MAX_CONCURRENT_JOBS=4  # Maximum concurrent FFmpeg jobs

# ------------------------------------------------------------------------------
# Media Processing Settings
# ------------------------------------------------------------------------------
TEMP_DIR=/tmp/ffmpeg
MAX_UPLOAD_SIZE=1073741824  # Max upload size in bytes (1GB default)

# Supported file formats (comma-separated)
SUPPORTED_VIDEO_FORMATS=mp4,mov,avi,mkv,webm
SUPPORTED_AUDIO_FORMATS=mp3,wav,aac,m4a,ogg,flac
SUPPORTED_IMAGE_FORMATS=jpg,jpeg,png,gif,webp

# ------------------------------------------------------------------------------
# Feature Flags
# ------------------------------------------------------------------------------
# Enable/disable features without code changes
FEATURE_DEV_API_ENABLED=false  # Development/debugging API endpoints
FEATURE_BEAT_DETECTION_ENABLED=false  # Beat detection for audio sync
FEATURE_GPU_ENCODING_ENABLED=false  # GPU-accelerated encoding (NVENC/QSV)
FEATURE_4K_OUTPUT_ENABLED=false  # 4K resolution output support
FEATURE_WEBSOCKET_ENABLED=true  # WebSocket real-time updates
FEATURE_METRICS_ENABLED=true  # Prometheus metrics collection
FEATURE_ADVANCED_FILTERS_ENABLED=false  # Advanced video filters and effects

# ------------------------------------------------------------------------------
# Internal API Authentication
# ------------------------------------------------------------------------------
# Comma-separated list of valid API keys for internal endpoints
INTERNAL_API_KEYS=dev_key_123,dev_key_456

# JWT settings for service-to-service authentication
JWT_SECRET_KEY=change_this_in_production_use_openssl_rand_base64_32
JWT_ALGORITHM=HS256
JWT_EXPIRATION_MINUTES=60

# ------------------------------------------------------------------------------
# External API Keys
# ------------------------------------------------------------------------------
# Replicate API token for AI video generation (https://replicate.com)
REPLICATE_API_TOKEN=your_replicate_api_token_here

# ------------------------------------------------------------------------------
# Docker Compose Settings (for local development)
# ------------------------------------------------------------------------------
REDIS_INSIGHT_PORT=5540  # Port for RedisInsight (if using debug profile)
