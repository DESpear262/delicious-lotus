# ===================================
# AI Video Generation Pipeline - FastAPI
# Environment Configuration Template
# ===================================

# SETUP INSTRUCTIONS:
# 1. Copy this file to .env in your FastAPI project root
# 2. Replace all placeholder values with actual credentials
# 3. Review all settings and adjust as needed for your environment
# 4. NEVER commit files with real credentials to git

# PRODUCTION AWS CONFIGURATION (DevOps Team):
# - AWS Region: us-east-2 (CRITICAL: Must be us-east-2)
# - Environment: dev
# - S3 Bucket: ai-video-gauntlet-gds-us-east-2
# - Database: ai-video-db (RDS PostgreSQL - ai_video_pipeline, ai_video_admin)
# - Redis: ai-video-redis (ElastiCache cluster - cache.t4g.micro)
# - ECS: ai-video-cluster / ai-video-backend-service (1 vCPU, 2 GB RAM)
# - ECR: ai-video-backend repository

# -----------------------------------
# Environment Identification
# -----------------------------------
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=debug
LOG_FORMAT=text

# -----------------------------------
# Database Configuration (PostgreSQL)
# -----------------------------------
# Production RDS Configuration (DevOps Team):
# - DB Identifier: ai-video-db
# - DB Instance Class: db.t4g.micro
# - Allocated Storage: 20 GB

POSTGRES_DB=ai_video_pipeline
POSTGRES_USER=ai_video_admin
POSTGRES_PASSWORD=madcatrakshasa
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
DATABASE_URL=postgresql://ai_video_admin:madcatrakshasa@postgres:5432/ai_video_pipeline
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# -----------------------------------
# Redis Configuration
# -----------------------------------
# Production ElastiCache Configuration (DevOps Team):
# - Cluster ID: ai-video-redis
# - Node Type: cache.t4g.micro
# - Number of Nodes: 1

REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_URL=redis://redis:6379/0
REDIS_MAX_CONNECTIONS=50

# -----------------------------------
# Backend API Configuration
# -----------------------------------
BACKEND_PORT=8000
API_BASE_URL=http://localhost:8000
SECRET_KEY=CHANGE_ME_generate_random_string_openssl_rand_hex_32
JWT_SECRET_KEY=CHANGE_ME_generate_different_random_string
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# -----------------------------------
# CORS Configuration
# -----------------------------------
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_ALLOW_HEADERS=*

# -----------------------------------
# AI Services Configuration (Replicate)
# -----------------------------------
REPLICATE_API_TOKEN=CHANGE_ME_your_replicate_api_token_here
REPLICATE_USE_CHEAP_MODELS=true
REPLICATE_MODEL_QUALITY_TIER=standard
REPLICATE_IMAGE_MODEL=stability-ai/sdxl:latest
REPLICATE_VIDEO_MODEL=deforum/deforum_stable_diffusion:latest
REPLICATE_TIMEOUT_SECONDS=300
REPLICATE_MAX_RETRIES=3
REPLICATE_RETRY_DELAY_SECONDS=5

# -----------------------------------
# AI Services Configuration (OpenAI)
# -----------------------------------
OPENAI_API_KEY=CHANGE_ME_your_openai_api_key_here

# -----------------------------------
# AWS Configuration
# -----------------------------------
AWS_ACCESS_KEY_ID=CHANGE_ME_your_aws_access_key_id
AWS_SECRET_ACCESS_KEY=CHANGE_ME_your_aws_secret_access_key
AWS_REGION=us-east-2
AWS_DEFAULT_REGION=us-east-2
S3_BUCKET=ai-video-gauntlet-gds-us-east-2
S3_UPLOADS_PREFIX=uploads/
S3_GENERATIONS_PREFIX=generations/
S3_COMPOSITIONS_PREFIX=compositions/
S3_TEMP_PREFIX=temp/
S3_PRESIGNED_URL_EXPIRY=3600

# -----------------------------------
# ECS Configuration (DevOps Team)
# -----------------------------------
# Production ECS Configuration:
# - Cluster Name: ai-video-cluster
# - Service Name: ai-video-backend-service
# - Task Family: ai-video-backend
# - Container Image Tag: latest
# - Task CPU: 1024 (1 vCPU)
# - Task Memory: 2048 (2 GB)
# - Desired Count: 1

ECS_CLUSTER=ai-video-cluster
ECS_SERVICE=ai-video-backend-service
ECS_TASK_DEFINITION=ai-video-backend
ECS_DESIRED_COUNT=1

# -----------------------------------
# ECR Configuration (DevOps Team)
# -----------------------------------
# Production ECR Configuration:
# - Repository Name: ai-video-backend

ECR_REPOSITORY=ai-video-backend

# -----------------------------------
# Storage Configuration
# -----------------------------------
USE_LOCAL_STORAGE=true
LOCAL_STORAGE_PATH=/app/storage
STORAGE_CLEANUP_ENABLED=true
STORAGE_CLEANUP_TEMP_FILES_DAYS=1
STORAGE_CLEANUP_GENERATIONS_DAYS=7
STORAGE_CLEANUP_CRON=0 2 * * *

# -----------------------------------
# Video Processing Configuration (FFmpeg)
# -----------------------------------
FFMPEG_PATH=/usr/bin/ffmpeg
FFPROBE_PATH=/usr/bin/ffprobe
FFMPEG_THREADS=4
FFMPEG_PRESET=medium
FFMPEG_LOG_LEVEL=info
OUTPUT_VIDEO_QUALITY=720p
OUTPUT_VIDEO_WIDTH=1280
OUTPUT_VIDEO_HEIGHT=720
OUTPUT_VIDEO_CODEC=libx264
OUTPUT_VIDEO_BITRATE=2M
OUTPUT_AUDIO_CODEC=aac
OUTPUT_AUDIO_BITRATE=128k
OUTPUT_AUDIO_SAMPLE_RATE=48000
MIN_VIDEO_DURATION=15
MAX_VIDEO_DURATION=180
MAX_AD_DURATION=60
MAX_MUSIC_VIDEO_DURATION=180
SUPPORTED_ASPECT_RATIOS=16:9,9:16,1:1

# -----------------------------------
# Job Processing Configuration (Celery)
# -----------------------------------
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0
CELERY_TASK_ALWAYS_EAGER=false
CELERY_TASK_EAGER_PROPAGATES=true
CELERY_TASK_TRACK_STARTED=true
CELERY_TASK_TIME_LIMIT=1800
CELERY_TASK_SOFT_TIME_LIMIT=1500
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_PREFETCH_MULTIPLIER=1
CELERY_WORKER_MAX_TASKS_PER_CHILD=100
MAX_CONCURRENT_JOBS=5
JOB_TIMEOUT_SECONDS=1200
JOB_RETRY_MAX_ATTEMPTS=3
JOB_RETRY_DELAY_SECONDS=10
CLEANUP_COMPLETED_JOBS_AFTER_DAYS=7
CLEANUP_FAILED_JOBS_AFTER_DAYS=3

# -----------------------------------
# Performance & Caching
# -----------------------------------
ENABLE_CACHING=true
CACHE_TTL_SECONDS=3600
CACHE_AI_RESPONSES=true
CACHE_ASSET_METADATA=true
REUSE_SIMILAR_PROMPTS=true
PROMPT_SIMILARITY_THRESHOLD=0.85

# -----------------------------------
# Rate Limiting
# -----------------------------------
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000
RATE_LIMIT_PER_DAY=10000
RATE_LIMIT_BURST=10

# -----------------------------------
# Security Settings
# -----------------------------------
MAX_UPLOAD_SIZE_MB=100
MAX_UPLOAD_SIZE_BYTES=104857600
ALLOWED_IMAGE_EXTENSIONS=.jpg,.jpeg,.png,.gif,.webp
ALLOWED_AUDIO_EXTENSIONS=.mp3,.wav,.m4a,.aac
ALLOWED_VIDEO_EXTENSIONS=.mp4,.mov,.avi,.webm
ALLOWED_UPLOAD_EXTENSIONS=.mp3,.wav,.m4a,.jpg,.jpeg,.png,.gif,.webp
MAX_PROMPT_LENGTH=2000
MIN_PROMPT_LENGTH=10
SANITIZE_USER_INPUT=true
SESSION_TIMEOUT_MINUTES=60
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=lax

# -----------------------------------
# Monitoring & Logging
# -----------------------------------
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_ENABLED=false
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_TIMEOUT=5
ENABLE_METRICS=true
METRICS_PORT=9090

# -----------------------------------
# Feature Flags
# -----------------------------------
ENABLE_AD_PIPELINE=true
ENABLE_MUSIC_VIDEO_PIPELINE=true
ENABLE_TIMELINE_EDITOR=false
ENABLE_ADVANCED_TRANSITIONS=false
ENABLE_CUSTOM_FONTS=false
ENABLE_BATCH_PROCESSING=false
ENABLE_TEMPLATE_MARKETPLACE=false
ENABLE_EXPERIMENTAL_MODELS=true
ENABLE_BETA_FEATURES=true

# -----------------------------------
# Frontend Configuration
# -----------------------------------
FRONTEND_BUILD_PATH=/app/frontend/dist
SERVE_FRONTEND=true
FRONTEND_CDN_URL=
STATIC_FILE_CACHE_MAX_AGE=3600

# -----------------------------------
# Cost Optimization
# -----------------------------------
USE_CHEAP_MODELS=true
MODEL_QUALITY_TIER=standard
MAX_CLIPS_PER_AD=5
MAX_CLIPS_PER_MUSIC_VIDEO=20
DEFAULT_CLIPS_PER_AD=3
DEFAULT_CLIPS_PER_MUSIC_VIDEO=10
BATCH_API_CALLS=true
MAX_BATCH_SIZE=5
ENABLE_ASSET_REUSE=true
ASSET_REUSE_SIMILARITY_THRESHOLD=0.9

# -----------------------------------
# Development Tools
# -----------------------------------
HOT_RELOAD=true
AUTO_RELOAD=true
ENABLE_DOCS=true
DOCS_URL=/docs
REDOC_URL=/redoc
OPENAPI_URL=/openapi.json
ENABLE_DEBUG_ENDPOINTS=true
ENABLE_TEST_ENDPOINTS=true
AUTO_MIGRATE=true
AUTO_CREATE_TABLES=true

# -----------------------------------
# Testing Configuration
# -----------------------------------
TEST_DATABASE_URL=postgresql://ai_video_user:CHANGE_ME_secure_dev_password_123@postgres:5432/ai_video_pipeline_test
RUN_TESTS_IN_PARALLEL=false
TEST_TIMEOUT_SECONDS=300
MOCK_REPLICATE_API=false
MOCK_AWS_SERVICES=false
